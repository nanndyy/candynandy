<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Pixel Candy</title>
<style>
  html, body {
    margin: 0;
    background: #0b0b0b;
    overflow: hidden;
  }
  canvas {
    display: block;
    image-rendering: pixelated;
  }
</style>
</head>
<body>
<canvas id="c"></canvas>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
}
window.addEventListener("resize", resize);
resize();

/* ==== WRAPPED CANDY PIXEL MAP ==== */
const candy = [
  "   ##     ##   ",
  " ###### ###### ",
  "##############",
  "##############",
  "##############",
  " ###### ###### ",
  "   ##     ##   "
];

function drawCandy(x, y, scale, glow=true) {
  const px = scale;

  if (glow) {
    ctx.shadowColor = "#ff6fae";
    ctx.shadowBlur = 30;
  }

  candy.forEach((row, r) => {
    [...row].forEach((p, c) => {
      if (p !== " ") {
        ctx.fillStyle =
          r === 3 && c > 4 && c < 9 ? "#ffd1e6" : "#ff5fa2";
        ctx.fillRect(
          x + c * px,
          y + r * px,
          px,
          px
        );
      }
    });
  });

  ctx.shadowBlur = 0;
}

/* ==== BIG FLOATING CANDY ==== */
let t = 0;

/* ==== FALLING CANDIES ==== */
const drops = Array.from({ length: 6 }, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * -canvas.height,
  speed: 0.3 + Math.random() * 0.4,
  scale: 4 + Math.random() * 2
}));

function loop() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // falling candies
  drops.forEach(d => {
    drawCandy(d.x, d.y, d.scale, false);
    d.y += d.speed;
    if (d.y > canvas.height + 50) {
      d.y = -100;
      d.x = Math.random() * canvas.width;
    }
  });

  // big center candy
  const scale = 10;
  const cx = canvas.width / 2 - (candy[0].length * scale) / 2;
  const cy = canvas.height / 2 - (candy.length * scale) / 2
           + Math.sin(t) * 12;

  drawCandy(cx, cy, scale, true);

  t += 0.01;
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>